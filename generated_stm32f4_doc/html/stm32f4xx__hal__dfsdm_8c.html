<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32F4_HAL: src/stm32f4xx_hal_dfsdm.c 文件参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STM32F4_HAL
   &#160;<span id="projectnumber">1.24.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('stm32f4xx__hal__dfsdm_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">stm32f4xx_hal_dfsdm.c 文件参考</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file provides firmware functions to manage the following functionalities of the Digital Filter for Sigma-Delta Modulators (DFSDM) peripherals:  
<a href="#details">更多...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="stm32f4xx__hal_8h_source.html">stm32f4xx_hal.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
stm32f4xx_hal_dfsdm.c 的引用(Include)关系图:</div>
<div class="dyncontent">
<div class="center"><img src="stm32f4xx__hal__dfsdm_8c__incl.png" border="0" usemap="#src_2stm32f4xx__hal__dfsdm_8c" alt=""/></div>
<map name="src_2stm32f4xx__hal__dfsdm_8c" id="src_2stm32f4xx__hal__dfsdm_8c">
<area shape="rect" title="This file provides firmware functions to manage the following functionalities of the Digital Filter f..." alt="" coords="5,5,207,32"/>
<area shape="rect" href="stm32f4xx__hal_8h.html" title="This file contains all the functions prototypes for the HAL module driver." alt="" coords="41,80,171,107"/>
<area shape="rect" title=" " alt="" coords="23,155,189,181"/>
</map>
</div>
</div>
<p><a href="stm32f4xx__hal__dfsdm_8c_source.html">浏览源代码.</a></p>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p>This file provides firmware functions to manage the following functionalities of the Digital Filter for Sigma-Delta Modulators (DFSDM) peripherals: </p>
<dl class="section author"><dt>作者</dt><dd>MCD Application Team<ul>
<li>Initialization and configuration of channels and filters</li>
<li>Regular channels configuration</li>
<li>Injected channels configuration</li>
<li>Regular/Injected Channels DMA Configuration</li>
<li>Interrupts and flags management</li>
<li>Analog watchdog feature</li>
<li>Short-circuit detector feature</li>
<li>Extremes detector feature</li>
<li>Clock absence detector feature</li>
<li>Break generation on analog watchdog or short-circuit event</li>
</ul>
</dd></dl>
<pre class="fragment">==============================================================================
                   ##### How to use this driver #####
==============================================================================
[..]
  *** Channel initialization ***
  ==============================
  [..]
    (#) User has first to initialize channels (before filters initialization).
    (#) As prerequisite, fill in the HAL_DFSDM_ChannelMspInit() :
      (++) Enable DFSDMz clock interface with __HAL_RCC_DFSDMz_CLK_ENABLE().
      (++) Enable the clocks for the DFSDMz GPIOS with __HAL_RCC_GPIOx_CLK_ENABLE().
      (++) Configure these DFSDMz pins in alternate mode using HAL_GPIO_Init().
      (++) If interrupt mode is used, enable and configure DFSDMz_FLT0 global
          interrupt with HAL_NVIC_SetPriority() and HAL_NVIC_EnableIRQ().
    (#) Configure the output clock, input, serial interface, analog watchdog,
        offset and data right bit shift parameters for this channel using the 
        HAL_DFSDM_ChannelInit() function.

  *** Channel clock absence detector ***
  ======================================
  [..]
    (#) Start clock absence detector using HAL_DFSDM_ChannelCkabStart() or
        HAL_DFSDM_ChannelCkabStart_IT().
    (#) In polling mode, use HAL_DFSDM_ChannelPollForCkab() to detect the clock
        absence.
    (#) In interrupt mode, HAL_DFSDM_ChannelCkabCallback() will be called if
        clock absence is detected.
    (#) Stop clock absence detector using HAL_DFSDM_ChannelCkabStop() or
        HAL_DFSDM_ChannelCkabStop_IT().
    (#) Please note that the same mode (polling or interrupt) has to be used 
        for all channels because the channels are sharing the same interrupt.
    (#) Please note also that in interrupt mode, if clock absence detector is
        stopped for one channel, interrupt will be disabled for all channels.

  *** Channel short circuit detector ***
  ======================================
  [..]    
    (#) Start short circuit detector using HAL_DFSDM_ChannelScdStart() or
        or HAL_DFSDM_ChannelScdStart_IT().
    (#) In polling mode, use HAL_DFSDM_ChannelPollForScd() to detect short
        circuit.
    (#) In interrupt mode, HAL_DFSDM_ChannelScdCallback() will be called if 
        short circuit is detected.
    (#) Stop short circuit detector using HAL_DFSDM_ChannelScdStop() or
        or HAL_DFSDM_ChannelScdStop_IT().
    (#) Please note that the same mode (polling or interrupt) has to be used 
        for all channels because the channels are sharing the same interrupt.
    (#) Please note also that in interrupt mode, if short circuit detector is
        stopped for one channel, interrupt will be disabled for all channels.

  *** Channel analog watchdog value ***
  =====================================
  [..]    
    (#) Get analog watchdog filter value of a channel using
        HAL_DFSDM_ChannelGetAwdValue().

  *** Channel offset value ***
  =====================================
  [..]    
    (#) Modify offset value of a channel using HAL_DFSDM_ChannelModifyOffset().

  *** Filter initialization ***
  =============================
  [..]
    (#) After channel initialization, user has to init filters.
    (#) As prerequisite, fill in the HAL_DFSDM_FilterMspInit() :
      (++) If interrupt mode is used , enable and configure DFSDMz_FLTx global
          interrupt with HAL_NVIC_SetPriority() and HAL_NVIC_EnableIRQ().
          Please note that DFSDMz_FLT0 global interrupt could be already
          enabled if interrupt is used for channel.
      (++) If DMA mode is used, configure DMA with HAL_DMA_Init() and link it
          with DFSDMz filter handle using __HAL_LINKDMA().
    (#) Configure the regular conversion, injected conversion and filter
        parameters for this filter using the HAL_DFSDM_FilterInit() function.

  *** Filter regular channel conversion ***
  =========================================
  [..]    
    (#) Select regular channel and enable/disable continuous mode using
        HAL_DFSDM_FilterConfigRegChannel().
    (#) Start regular conversion using HAL_DFSDM_FilterRegularStart(),
        HAL_DFSDM_FilterRegularStart_IT(), HAL_DFSDM_FilterRegularStart_DMA() or
        HAL_DFSDM_FilterRegularMsbStart_DMA().
    (#) In polling mode, use HAL_DFSDM_FilterPollForRegConversion() to detect 
        the end of regular conversion.
    (#) In interrupt mode, HAL_DFSDM_FilterRegConvCpltCallback() will be called
        at the end of regular conversion.
    (#) Get value of regular conversion and corresponding channel using 
        HAL_DFSDM_FilterGetRegularValue().
    (#) In DMA mode, HAL_DFSDM_FilterRegConvHalfCpltCallback() and 
        HAL_DFSDM_FilterRegConvCpltCallback() will be called respectively at the
        half transfer and at the transfer complete. Please note that 
        HAL_DFSDM_FilterRegConvHalfCpltCallback() will be called only in DMA
        circular mode.
    (#) Stop regular conversion using HAL_DFSDM_FilterRegularStop(),
        HAL_DFSDM_FilterRegularStop_IT() or HAL_DFSDM_FilterRegularStop_DMA().

  *** Filter injected channels conversion ***
  ===========================================
  [..]
    (#) Select injected channels using HAL_DFSDM_FilterConfigInjChannel().
    (#) Start injected conversion using HAL_DFSDM_FilterInjectedStart(),
        HAL_DFSDM_FilterInjectedStart_IT(), HAL_DFSDM_FilterInjectedStart_DMA() or
        HAL_DFSDM_FilterInjectedMsbStart_DMA().
    (#) In polling mode, use HAL_DFSDM_FilterPollForInjConversion() to detect 
        the end of injected conversion.
    (#) In interrupt mode, HAL_DFSDM_FilterInjConvCpltCallback() will be called
        at the end of injected conversion.
    (#) Get value of injected conversion and corresponding channel using 
        HAL_DFSDM_FilterGetInjectedValue().
    (#) In DMA mode, HAL_DFSDM_FilterInjConvHalfCpltCallback() and 
        HAL_DFSDM_FilterInjConvCpltCallback() will be called respectively at the
        half transfer and at the transfer complete. Please note that 
        HAL_DFSDM_FilterInjConvCpltCallback() will be called only in DMA
        circular mode.
    (#) Stop injected conversion using HAL_DFSDM_FilterInjectedStop(),
        HAL_DFSDM_FilterInjectedStop_IT() or HAL_DFSDM_FilterInjectedStop_DMA().

  *** Filter analog watchdog ***
  ==============================
  [..]
    (#) Start filter analog watchdog using HAL_DFSDM_FilterAwdStart_IT().
    (#) HAL_DFSDM_FilterAwdCallback() will be called if analog watchdog occurs.
    (#) Stop filter analog watchdog using HAL_DFSDM_FilterAwdStop_IT().

  *** Filter extreme detector ***
  ===============================
  [..]
    (#) Start filter extreme detector using HAL_DFSDM_FilterExdStart().
    (#) Get extreme detector maximum value using HAL_DFSDM_FilterGetExdMaxValue().
    (#) Get extreme detector minimum value using HAL_DFSDM_FilterGetExdMinValue().
    (#) Start filter extreme detector using HAL_DFSDM_FilterExdStop().

  *** Filter conversion time ***
  ==============================
  [..]
    (#) Get conversion time value using HAL_DFSDM_FilterGetConvTimeValue().

  *** Callback registration ***
  =============================

  The compilation define USE_HAL_DFSDM_REGISTER_CALLBACKS when set to 1
  allows the user to configure dynamically the driver callbacks.
  Use functions @ref HAL_DFSDM_Channel_RegisterCallback(),
  @ref HAL_DFSDM_Filter_RegisterCallback() or
  @ref HAL_DFSDM_Filter_RegisterAwdCallback() to register a user callback.

  Function @ref HAL_DFSDM_Channel_RegisterCallback() allows to register
  following callbacks:
    (+) CkabCallback      : DFSDM channel clock absence detection callback.
    (+) ScdCallback       : DFSDM channel short circuit detection callback.
    (+) MspInitCallback   : DFSDM channel MSP init callback.
    (+) MspDeInitCallback : DFSDM channel MSP de-init callback.
  This function takes as parameters the HAL peripheral handle, the Callback ID
  and a pointer to the user callback function.

  Function @ref HAL_DFSDM_Filter_RegisterCallback() allows to register
  following callbacks:
    (+) RegConvCpltCallback     : DFSDM filter regular conversion complete callback.
    (+) RegConvHalfCpltCallback : DFSDM filter half regular conversion complete callback.
    (+) InjConvCpltCallback     : DFSDM filter injected conversion complete callback.
    (+) InjConvHalfCpltCallback : DFSDM filter half injected conversion complete callback.
    (+) ErrorCallback           : DFSDM filter error callback.
    (+) MspInitCallback         : DFSDM filter MSP init callback.
    (+) MspDeInitCallback       : DFSDM filter MSP de-init callback.
  This function takes as parameters the HAL peripheral handle, the Callback ID
  and a pointer to the user callback function.

  For specific DFSDM filter analog watchdog callback use dedicated register callback:   
  @ref HAL_DFSDM_Filter_RegisterAwdCallback().

  Use functions @ref HAL_DFSDM_Channel_UnRegisterCallback() or
  @ref HAL_DFSDM_Filter_UnRegisterCallback() to reset a callback to the default
  weak function.

  @ref HAL_DFSDM_Channel_UnRegisterCallback() takes as parameters the HAL peripheral handle,
  and the Callback ID.
  This function allows to reset following callbacks:
    (+) CkabCallback      : DFSDM channel clock absence detection callback.
    (+) ScdCallback       : DFSDM channel short circuit detection callback.
    (+) MspInitCallback   : DFSDM channel MSP init callback.
    (+) MspDeInitCallback : DFSDM channel MSP de-init callback.

  @ref HAL_DFSDM_Filter_UnRegisterCallback() takes as parameters the HAL peripheral handle,
  and the Callback ID.
  This function allows to reset following callbacks:
    (+) RegConvCpltCallback     : DFSDM filter regular conversion complete callback.
    (+) RegConvHalfCpltCallback : DFSDM filter half regular conversion complete callback.
    (+) InjConvCpltCallback     : DFSDM filter injected conversion complete callback.
    (+) InjConvHalfCpltCallback : DFSDM filter half injected conversion complete callback.
    (+) ErrorCallback           : DFSDM filter error callback.
    (+) MspInitCallback         : DFSDM filter MSP init callback.
    (+) MspDeInitCallback       : DFSDM filter MSP de-init callback.

  For specific DFSDM filter analog watchdog callback use dedicated unregister callback:
  @ref HAL_DFSDM_Filter_UnRegisterAwdCallback().

  By default, after the call of init function and if the state is RESET 
  all callbacks are reset to the corresponding legacy weak functions: 
  examples @ref HAL_DFSDM_ChannelScdCallback(), @ref HAL_DFSDM_FilterErrorCallback().
  Exception done for MspInit and MspDeInit callbacks that are respectively
  reset to the legacy weak functions in the init and de-init only when these 
  callbacks are null (not registered beforehand).
  If not, MspInit or MspDeInit are not null, the init and de-init keep and use
  the user MspInit/MspDeInit callbacks (registered beforehand)

  Callbacks can be registered/unregistered in READY state only.
  Exception done for MspInit/MspDeInit callbacks that can be registered/unregistered
  in READY or RESET state, thus registered (user) MspInit/DeInit callbacks can be used
  during the init/de-init.
  In that case first register the MspInit/MspDeInit user callbacks using 
  @ref HAL_DFSDM_Channel_RegisterCallback() or
  @ref HAL_DFSDM_Filter_RegisterCallback() before calling init or de-init function.

  When The compilation define USE_HAL_DFSDM_REGISTER_CALLBACKS is set to 0 or
  not defined, the callback registering feature is not available 
  and weak callbacks are used.</pre><dl class="section attention"><dt>注意</dt><dd></dd></dl>
<h2><center>&copy; Copyright (c) 2017 STMicroelectronics. All rights reserved.</center></h2>
<p>This software component is licensed by ST under BSD 3-Clause license, the "License"; You may not use this file except in compliance with the License. You may obtain a copy of the License at: opensource.org/licenses/BSD-3-Clause </p>

<p class="definition">在文件 <a class="el" href="stm32f4xx__hal__dfsdm_8c_source.html">stm32f4xx_hal_dfsdm.c</a> 中定义.</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="stm32f4xx__hal__dfsdm_8c.html">stm32f4xx_hal_dfsdm.c</a></li>
    <li class="footer">制作者
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
